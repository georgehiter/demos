# LCELæ¼”ç¤ºç¨‹åºæŠ€æœ¯æž¶æž„æ–‡æ¡£

## ðŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†LCELæ¼”ç¤ºç¨‹åºçš„æŠ€æœ¯æž¶æž„è®¾è®¡ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæž¶æž„ã€ç»„ä»¶è®¾è®¡ã€æŠ€æœ¯é€‰åž‹å’Œå®žçŽ°ç»†èŠ‚ã€‚

## ðŸ—ï¸ ç³»ç»Ÿæž¶æž„æ¦‚è§ˆ

### æ•´ä½“æž¶æž„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LCELæ¼”ç¤ºç¨‹åºæž¶æž„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åº”ç”¨å±‚ (Application Layer)                                 â”‚
â”‚  â”œâ”€â”€ run_demo.py          # ä¸»ç¨‹åºå…¥å£                      â”‚
â”‚  â”œâ”€â”€ demo_pipeline.py     # ç®¡é“æž„å»ºå™¨                      â”‚
â”‚  â””â”€â”€ sample_data.py       # ç¤ºä¾‹æ•°æ®æä¾›è€…                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)                          â”‚
â”‚  â”œâ”€â”€ TheoryExtractor      # ç†è®ºæ¡†æž¶æå–å™¨                  â”‚
â”‚  â”œâ”€â”€ TableExtractor       # è¡¨æ ¼æ•°æ®æå–å™¨                  â”‚
â”‚  â””â”€â”€ ReportGenerator      # åˆ†æžæŠ¥å‘Šç”Ÿæˆå™¨                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)                          â”‚
â”‚  â”œâ”€â”€ MockLLMManager       # Mock LLMç®¡ç†å™¨                  â”‚
â”‚  â””â”€â”€ lcel_components.py   # æ ¸å¿ƒç»„ä»¶å®žçŽ°                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¡†æž¶å±‚ (Framework Layer)                                   â”‚
â”‚  â”œâ”€â”€ LangChain Core       # LCELæ ¸å¿ƒæ¡†æž¶                    â”‚
â”‚  â”œâ”€â”€ LangChain Community  # ç¤¾åŒºç»„ä»¶                        â”‚
â”‚  â””â”€â”€ asyncio              # å¼‚æ­¥ç¼–ç¨‹æ”¯æŒ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æž¶æž„è®¾è®¡åŽŸåˆ™

1. **åˆ†å±‚æž¶æž„**: æ¸…æ™°çš„å±‚æ¬¡åˆ†ç¦»ï¼Œä¾¿äºŽç»´æŠ¤å’Œæ‰©å±•
2. **ç»„ä»¶åŒ–è®¾è®¡**: æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œæ”¯æŒçµæ´»ç»„åˆ
3. **å¼‚æ­¥ä¼˜å…ˆ**: å……åˆ†åˆ©ç”¨å¼‚æ­¥ç¼–ç¨‹æå‡æ€§èƒ½
4. **ç±»åž‹å®‰å…¨**: ä½¿ç”¨TypedDictç¡®ä¿ç±»åž‹å®‰å…¨
5. **æŽ¥å£ç»Ÿä¸€**: æ‰€æœ‰ç»„ä»¶å®žçŽ°RunnableæŽ¥å£

## ðŸ”§ æ ¸å¿ƒç»„ä»¶è®¾è®¡

### 1. TheoryExtractor (ç†è®ºæå–å™¨)

#### ç»„ä»¶èŒè´£
- ä»Žç†è®ºæ–‡æœ¬ä¸­æå–ç†è®ºæ¡†æž¶
- è¯†åˆ«ç ”ç©¶èƒŒæ™¯ã€æ–¹æ³•ã€å‘çŽ°ç­‰å…³é”®ç« èŠ‚
- æä¾›ç»“æž„åŒ–çš„ç†è®ºåˆ†æžç»“æžœ

#### æŠ€æœ¯å®žçŽ°
```python
class TheoryExtractor(Runnable):
    async def ainvoke(self, inputs: Dict[str, Any], config: Any = None) -> Dict[str, List[str]]:
        # å¼‚æ­¥è°ƒç”¨æŽ¥å£
        pass
    
    def invoke(self, inputs: Dict[str, Any], config: Any = None) -> Dict[str, List[str]]:
        # åŒæ­¥è°ƒç”¨æŽ¥å£
        pass
```

#### å…³é”®ç‰¹æ€§
- **åŒæ¨¡å¼æ”¯æŒ**: åŒæ­¥å’Œå¼‚æ­¥è°ƒç”¨
- **é”™è¯¯å¤„ç†**: å†…ç½®å¼‚å¸¸å¤„ç†å’Œé»˜è®¤å€¼
- **å“åº”è§£æž**: æ™ºèƒ½è§£æžLLMå“åº”æ ¼å¼
- **ç±»åž‹å®‰å…¨**: æ˜Žç¡®çš„è¾“å…¥è¾“å‡ºç±»åž‹å®šä¹‰

### 2. TableExtractor (è¡¨æ ¼æå–å™¨)

#### ç»„ä»¶èŒè´£
- è¯†åˆ«å’Œè§£æžMarkdownæ ¼å¼è¡¨æ ¼
- æå–è¡¨æ ¼ç»“æž„ï¼ˆè¡¨å¤´ã€æ•°æ®è¡Œï¼‰
- ä½¿ç”¨LLMå¢žå¼ºè¡¨æ ¼æ•°æ®è§£è¯»

#### æŠ€æœ¯å®žçŽ°
```python
@dataclass
class TableData:
    title: str
    headers: List[str]
    rows: List[List[str]]
    start_line: int = 0
    end_line: int = 0
    interpretation: str = ""

class TableExtractor(Runnable):
    async def extract_tables(self, content: str) -> List[TableData]:
        # è¡¨æ ¼æå–æ ¸å¿ƒé€»è¾‘
        pass
```

#### å…³é”®ç‰¹æ€§
- **æ™ºèƒ½è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«è¡¨æ ¼è¾¹ç•Œå’Œç»“æž„
- **å¹¶å‘å¢žå¼º**: å¼‚æ­¥å¹¶å‘å¤„ç†å¤šä¸ªè¡¨æ ¼
- **æ•°æ®éªŒè¯**: ç¡®ä¿è¡¨æ ¼æ•°æ®å®Œæ•´æ€§
- **LLMé›†æˆ**: æ™ºèƒ½è§£è¯»è¡¨æ ¼å†…å®¹

### 3. ReportGenerator (æŠ¥å‘Šç”Ÿæˆå™¨)

#### ç»„ä»¶èŒè´£
- æ•´åˆç†è®ºå’Œè¡¨æ ¼æ•°æ®
- ç”Ÿæˆç»“æž„åŒ–çš„åˆ†æžæŠ¥å‘Š
- æä¾›Markdownæ ¼å¼è¾“å‡º

#### æŠ€æœ¯å®žçŽ°
```python
class ReportGenerator(Runnable):
    async def ainvoke(self, inputs: Dict[str, Any], config: Any = None) -> str:
        theory_framework = inputs.get("theory", [])
        tables = inputs.get("tables", [])
        # ç”ŸæˆæŠ¥å‘Šé€»è¾‘
        pass
```

#### å…³é”®ç‰¹æ€§
- **æ•°æ®èžåˆ**: æ™ºèƒ½æ•´åˆå¤šç§æ•°æ®æº
- **æ¨¡æ¿åŒ–**: ç»“æž„åŒ–çš„æŠ¥å‘Šç”Ÿæˆ
- **æ ¼å¼æŽ§åˆ¶**: ç»Ÿä¸€çš„Markdownè¾“å‡º
- **å†…å®¹éªŒè¯**: ç¡®ä¿æŠ¥å‘Šå®Œæ•´æ€§

### 4. MockLLMManager (Mock LLMç®¡ç†å™¨)

#### ç»„ä»¶èŒè´£
- æ¨¡æ‹ŸçœŸå®žçš„LLMè°ƒç”¨è¡Œä¸º
- æä¾›é¢„å®šä¹‰çš„å“åº”æ¨¡æ¿
- æŽ§åˆ¶å¹¶å‘è°ƒç”¨å’Œå»¶è¿Ÿ

#### æŠ€æœ¯å®žçŽ°
```python
class MockLLMManager:
    def __init__(self):
        self.max_concurrent_calls = 3
        self.mock_delay = 0.1
        self._semaphore = asyncio.Semaphore(self.max_concurrent_calls)
```

#### å…³é”®ç‰¹æ€§
- **å¹¶å‘æŽ§åˆ¶**: ä¿¡å·é‡æŽ§åˆ¶æœ€å¤§å¹¶å‘æ•°
- **å»¶è¿Ÿæ¨¡æ‹Ÿ**: æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿå’ŒLLMå“åº”æ—¶é—´
- **å“åº”æ¨¡æ¿**: é¢„å®šä¹‰çš„å“åº”å†…å®¹
- **é‡è¯•æœºåˆ¶**: å†…ç½®é‡è¯•é€»è¾‘

## ðŸ”„ LCELç®¡é“è®¾è®¡

### ç®¡é“æž¶æž„æ¨¡å¼

#### 1. å¹¶è¡Œå¤„ç†ç®¡é“
```python
parallel_pipeline = RunnableParallel({
    "theory": theory_extractor,
    "tables": table_extractor,
})
```

**è®¾è®¡ä¼˜åŠ¿**:
- çœŸæ­£çš„å¹¶è¡Œæ‰§è¡Œï¼Œæå‡å¤„ç†æ•ˆçŽ‡
- ç‹¬ç«‹çš„æ•°æ®æµï¼Œä¾¿äºŽé”™è¯¯éš”ç¦»
- æ”¯æŒåŠ¨æ€ç»„åˆå’Œæ‰©å±•

#### 2. ä¸²è¡Œèšåˆç®¡é“
```python
final_pipeline = (
    parallel_pipeline 
    | report_generator 
    | StrOutputParser()
)
```

**è®¾è®¡ä¼˜åŠ¿**:
- æ¸…æ™°çš„æ•°æ®æµå‘ï¼Œä¾¿äºŽè°ƒè¯•
- ç±»åž‹å®‰å…¨çš„ç®¡é“ç»„åˆ
- æ”¯æŒä¸­é—´ç»“æžœå¤„ç†

### ç®¡é“ç»„åˆç­–ç•¥

#### æ“ä½œç¬¦é‡è½½
- ä½¿ç”¨`|`æ“ä½œç¬¦ç»„åˆç»„ä»¶
- æ”¯æŒé“¾å¼è°ƒç”¨å’ŒåµŒå¥—ç»„åˆ
- è‡ªåŠ¨ç±»åž‹æŽ¨æ–­å’ŒéªŒè¯

#### å¹¶è¡Œä¸Žä¸²è¡Œ
- `RunnableParallel`: å¹¶è¡Œæ‰§è¡Œå¤šä¸ªç»„ä»¶
- `|`æ“ä½œç¬¦: ä¸²è¡Œè¿žæŽ¥ç»„ä»¶
- æ”¯æŒæ··åˆæ¨¡å¼ç»„åˆ

## ðŸš€ å¼‚æ­¥æž¶æž„è®¾è®¡

### å¼‚æ­¥æ‰§è¡Œæ¨¡åž‹

#### äº‹ä»¶å¾ªçŽ¯ç®¡ç†
```python
async def demonstrate_async_processing():
    start_time = asyncio.get_event_loop().time()
    result = await pipeline.ainvoke({"content": content})
    end_time = asyncio.get_event_loop().time()
```

#### å¹¶å‘æŽ§åˆ¶ç­–ç•¥
- **ä¿¡å·é‡æŽ§åˆ¶**: é™åˆ¶æœ€å¤§å¹¶å‘LLMè°ƒç”¨æ•°
- **ä»»åŠ¡åˆ†ç»„**: ä½¿ç”¨`asyncio.gather`æ‰¹é‡å¤„ç†
- **å¼‚å¸¸éš”ç¦»**: å•ä¸ªä»»åŠ¡å¤±è´¥ä¸å½±å“æ•´ä½“æµç¨‹

### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### 1. å¹¶å‘å¤„ç†
- ç†è®ºå’Œè¡¨æ ¼æå–å¹¶è¡Œæ‰§è¡Œ
- å¤šä¸ªè¡¨æ ¼å¼‚æ­¥å¢žå¼º
- æ‰¹é‡LLMè°ƒç”¨ä¼˜åŒ–

#### 2. èµ„æºç®¡ç†
- å¼‚æ­¥ä¿¡å·é‡æŽ§åˆ¶èµ„æºä½¿ç”¨
- å»¶è¿Ÿæ¨¡æ‹Ÿé¿å…èµ„æºè¿‡åº¦æ¶ˆè€—
- å†…å­˜å‹å¥½çš„æ•°æ®ç»“æž„è®¾è®¡

## ðŸ”’ ç±»åž‹å®‰å…¨è®¾è®¡

### TypedDictç±»åž‹å®šä¹‰

#### è¾“å…¥ç±»åž‹
```python
class PipelineInput(TypedDict):
    """ç®¡é“è¾“å…¥ç±»åž‹"""
    content: str
```

#### è¾“å‡ºç±»åž‹
```python
class PipelineOutput(TypedDict):
    """ç®¡é“è¾“å‡ºç±»åž‹"""
    theory: Dict[str, List[str]]
    tables: List[Any]
    report: str
```

### ç±»åž‹å®‰å…¨ä¼˜åŠ¿

1. **ç¼–è¯‘æ—¶æ£€æŸ¥**: æå‰å‘çŽ°ç±»åž‹é”™è¯¯
2. **æŽ¥å£å¥‘çº¦**: æ˜Žç¡®çš„è¾“å…¥è¾“å‡ºè§„èŒƒ
3. **ä»£ç æç¤º**: IDEæä¾›å‡†ç¡®çš„ä»£ç è¡¥å…¨
4. **æ–‡æ¡£åŒ–**: ç±»åž‹å®šä¹‰å³æ–‡æ¡£

## ðŸ“Š æ•°æ®æµè®¾è®¡

### æ•°æ®æµå‘å›¾

```
è¾“å…¥æ•°æ® â†’ å¹¶è¡Œå¤„ç† â†’ æ•°æ®èšåˆ â†’ æŠ¥å‘Šç”Ÿæˆ â†’ è¾“å‡ºç»“æžœ
    â†“           â†“         â†“         â†“         â†“
ç†è®ºæ–‡æœ¬   ç†è®ºæå–   ç†è®ºæ¡†æž¶   æ•°æ®èžåˆ   åˆ†æžæŠ¥å‘Š
è¡¨æ ¼å†…å®¹   è¡¨æ ¼æå–   è¡¨æ ¼æ•°æ®   å†…å®¹æ•´åˆ   Markdown
```

### æ•°æ®è½¬æ¢æµç¨‹

#### 1. æ•°æ®è¾“å…¥é˜¶æ®µ
- æ–‡æœ¬å†…å®¹éªŒè¯å’Œé¢„å¤„ç†
- æ•°æ®æ ¼å¼æ ‡å‡†åŒ–
- è¾“å…¥å‚æ•°ç±»åž‹æ£€æŸ¥

#### 2. å¹¶è¡Œå¤„ç†é˜¶æ®µ
- ç†è®ºæå–å’Œè¡¨æ ¼æå–å¹¶å‘æ‰§è¡Œ
- ç‹¬ç«‹çš„æ•°æ®å¤„ç†æµç¨‹
- å¼‚å¸¸éš”ç¦»å’Œé”™è¯¯å¤„ç†

#### 3. æ•°æ®èšåˆé˜¶æ®µ
- å¤šæºæ•°æ®æ•´åˆ
- æ•°æ®ä¸€è‡´æ€§éªŒè¯
- ä¸­é—´ç»“æžœç¼“å­˜

#### 4. æŠ¥å‘Šç”Ÿæˆé˜¶æ®µ
- ç»“æž„åŒ–æŠ¥å‘Šæ¨¡æ¿
- å†…å®¹è´¨é‡æ£€æŸ¥
- è¾“å‡ºæ ¼å¼æ ‡å‡†åŒ–

## ðŸ› ï¸ æŠ€æœ¯é€‰åž‹

### æ ¸å¿ƒæ¡†æž¶

#### LangChain Core
- **ç‰ˆæœ¬**: >= 0.3.0, < 0.4.0
- **ç”¨é€”**: LCELæ ¸å¿ƒåŠŸèƒ½æ”¯æŒ
- **ä¼˜åŠ¿**: æˆç†Ÿçš„è¡¨è¾¾å¼è¯­è¨€æ¡†æž¶

#### LangChain Community
- **ç‰ˆæœ¬**: >= 0.3.0, < 0.4.0
- **ç”¨é€”**: ç¤¾åŒºç»„ä»¶å’Œæ‰©å±•
- **ä¼˜åŠ¿**: ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ

### å¼‚æ­¥æ”¯æŒ

#### asyncio
- **ç”¨é€”**: å¼‚æ­¥ç¼–ç¨‹æ ¸å¿ƒæ”¯æŒ
- **ç‰¹æ€§**: äº‹ä»¶å¾ªçŽ¯ã€åç¨‹ã€ä»»åŠ¡ç®¡ç†
- **ä¼˜åŠ¿**: Pythonæ ‡å‡†åº“ï¼Œæ€§èƒ½ä¼˜ç§€

### ä¾èµ–ç®¡ç†

#### Poetry
- **ç”¨é€”**: é¡¹ç›®ä¾èµ–ç®¡ç†
- **ä¼˜åŠ¿**: çŽ°ä»£åŒ–çš„PythonåŒ…ç®¡ç†å·¥å…·
- **ç‰¹æ€§**: ä¾èµ–è§£æžã€è™šæ‹ŸçŽ¯å¢ƒç®¡ç†

## ðŸ”§ é…ç½®ç®¡ç†

### ç¡¬ç¼–ç é…ç½®

#### Mock LLMé…ç½®
```python
self.max_concurrent_calls = 3      # æœ€å¤§å¹¶å‘è°ƒç”¨æ•°
self.mock_delay = 0.1             # Mockå»¶è¿Ÿï¼ˆç§’ï¼‰
```

#### é‡è¯•é…ç½®
```python
max_retries: int = 1              # æœ€å¤§é‡è¯•æ¬¡æ•°
```

### é…ç½®è®¾è®¡åŽŸåˆ™

1. **ç®€åŒ–æ€§**: æ¼”ç¤ºç¨‹åºä½¿ç”¨ç¡¬ç¼–ç é…ç½®
2. **å¯é¢„æµ‹æ€§**: å›ºå®šçš„é…ç½®å€¼ä¾¿äºŽç†è§£
3. **æ€§èƒ½å¹³è¡¡**: åˆç†çš„å¹¶å‘æ•°å’Œå»¶è¿Ÿè®¾ç½®

## ðŸ“ˆ æ€§èƒ½ç‰¹å¾

### æ€§èƒ½æŒ‡æ ‡

#### å“åº”æ—¶é—´
- **Mock LLMå»¶è¿Ÿ**: 100ms
- **ç†è®ºæå–**: 100-200ms
- **è¡¨æ ¼æå–**: 100-300msï¼ˆå–å†³äºŽè¡¨æ ¼æ•°é‡ï¼‰
- **æŠ¥å‘Šç”Ÿæˆ**: 100-200ms

#### å¹¶å‘èƒ½åŠ›
- **æœ€å¤§å¹¶å‘LLMè°ƒç”¨**: 3ä¸ª
- **å¹¶è¡Œå¤„ç†ç»„ä»¶**: 2ä¸ªï¼ˆç†è®º+è¡¨æ ¼ï¼‰
- **è¡¨æ ¼å¢žå¼ºå¹¶å‘**: æ— é™åˆ¶ï¼ˆå—LLMå¹¶å‘é™åˆ¶ï¼‰

#### èµ„æºä½¿ç”¨
- **å†…å­˜å ç”¨**: è½»é‡çº§ï¼ˆ< 50MBï¼‰
- **CPUä½¿ç”¨**: ä½Žï¼ˆä¸»è¦æ˜¯I/Oç­‰å¾…ï¼‰
- **ç½‘ç»œ**: æ— ï¼ˆMockçŽ¯å¢ƒï¼‰

### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

1. **å¼‚æ­¥å¹¶å‘**: å……åˆ†åˆ©ç”¨å¼‚æ­¥ç¼–ç¨‹æå‡æ€§èƒ½
2. **æ‰¹é‡å¤„ç†**: è¡¨æ ¼å¢žå¼ºä½¿ç”¨æ‰¹é‡å¼‚æ­¥è°ƒç”¨
3. **èµ„æºæŽ§åˆ¶**: ä¿¡å·é‡æŽ§åˆ¶é¿å…èµ„æºè¿‡åº¦æ¶ˆè€—
4. **å»¶è¿Ÿæ¨¡æ‹Ÿ**: åˆç†çš„å»¶è¿Ÿè®¾ç½®é¿å…è¿‡è½½

## ðŸ” é”™è¯¯å¤„ç†ç­–ç•¥

### å¼‚å¸¸å¤„ç†å±‚æ¬¡

#### ç»„ä»¶çº§é”™è¯¯å¤„ç†
```python
try:
    response = await self.llm_manager.invoke_with_retry(prompt)
    return self.parse_response(response)
except Exception as e:
    print(f"âŒ [Theory] ç†è®ºæ¡†æž¶æå–å¤±è´¥: {e}")
    return self.get_default_framework()
```

#### ç®¡é“çº§é”™è¯¯å¤„ç†
- å•ä¸ªç»„ä»¶å¤±è´¥ä¸å½±å“æ•´ä½“æµç¨‹
- æä¾›é»˜è®¤å€¼å’Œé™çº§å¤„ç†
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œè¯Šæ–­ä¿¡æ¯

### é”™è¯¯æ¢å¤æœºåˆ¶

#### é‡è¯•ç­–ç•¥
- å†…ç½®é‡è¯•æœºåˆ¶ï¼ˆé»˜è®¤1æ¬¡ï¼‰
- æŒ‡æ•°é€€é¿ç®—æ³•
- å¼‚å¸¸ç±»åž‹åŒºåˆ†å¤„ç†

#### é™çº§å¤„ç†
- æä¾›é»˜è®¤å“åº”æ¨¡æ¿
- éƒ¨åˆ†åŠŸèƒ½å¯ç”¨æ€§ä¿è¯
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

## ðŸ”® æ‰©å±•æ€§è®¾è®¡

### ç»„ä»¶æ‰©å±•

#### æ–°ç»„ä»¶æ·»åŠ 
1. å®žçŽ°RunnableæŽ¥å£
2. å®šä¹‰æ˜Žç¡®çš„è¾“å…¥è¾“å‡ºç±»åž‹
3. é›†æˆåˆ°ç®¡é“ç»„åˆä¸­

#### ç®¡é“æ‰©å±•
1. ä½¿ç”¨æ“ä½œç¬¦ç»„åˆæ–°ç»„ä»¶
2. æ”¯æŒåµŒå¥—å’Œæ¡ä»¶ç»„åˆ
3. åŠ¨æ€ç®¡é“æž„å»º

### åŠŸèƒ½æ‰©å±•

#### æ•°æ®æºæ‰©å±•
- æ”¯æŒæ›´å¤šæ–‡ä»¶æ ¼å¼
- å¤–éƒ¨APIé›†æˆ
- æ•°æ®åº“è¿žæŽ¥æ”¯æŒ

#### è¾“å‡ºæ ¼å¼æ‰©å±•
- å¤šç§æŠ¥å‘Šæ ¼å¼ï¼ˆPDFã€Wordç­‰ï¼‰
- å¯è§†åŒ–å›¾è¡¨ç”Ÿæˆ
- æ•°æ®å¯¼å‡ºåŠŸèƒ½

## ðŸ“š æœ€ä½³å®žè·µ

### ä»£ç ç»„ç»‡

1. **æ¨¡å—åŒ–è®¾è®¡**: åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼ŒèŒè´£æ¸…æ™°
2. **æŽ¥å£ç»Ÿä¸€**: æ‰€æœ‰ç»„ä»¶å®žçŽ°RunnableæŽ¥å£
3. **ç±»åž‹æ³¨è§£**: å®Œæ•´çš„ç±»åž‹æç¤ºå’Œæ–‡æ¡£

### å¼‚æ­¥ç¼–ç¨‹

1. **é¿å…é˜»å¡ž**: ä½¿ç”¨å¼‚æ­¥I/Oæ“ä½œ
2. **å¹¶å‘æŽ§åˆ¶**: åˆç†ä½¿ç”¨ä¿¡å·é‡å’Œé”
3. **å¼‚å¸¸å¤„ç†**: å¼‚æ­¥çŽ¯å¢ƒä¸‹çš„å¼‚å¸¸ä¼ æ’­

### æµ‹è¯•ç­–ç•¥

1. **å•å…ƒæµ‹è¯•**: ç»„ä»¶çº§åˆ«çš„åŠŸèƒ½æµ‹è¯•
2. **é›†æˆæµ‹è¯•**: ç®¡é“ç»„åˆçš„ç«¯åˆ°ç«¯æµ‹è¯•
3. **æ€§èƒ½æµ‹è¯•**: å¹¶å‘å’Œè´Ÿè½½æµ‹è¯•

## ðŸš¨ æ³¨æ„äº‹é¡¹

### æŠ€æœ¯é™åˆ¶

1. **MockçŽ¯å¢ƒ**: ä¸åŒ…å«çœŸå®žçš„LLMè°ƒç”¨
2. **ç¡¬ç¼–ç é…ç½®**: é…ç½®å‚æ•°å›ºå®šï¼Œä¸æ”¯æŒåŠ¨æ€è°ƒæ•´
3. **ç®€åŒ–å®žçŽ°**: ç›¸æ¯”ç”Ÿäº§çŽ¯å¢ƒï¼Œé”™è¯¯å¤„ç†è¾ƒç®€å•

### ä½¿ç”¨å»ºè®®

1. **å­¦ä¹ ç›®çš„**: ä¸»è¦ç”¨äºŽç†è§£LCELæ¦‚å¿µ
2. **å¼€å‘å‚è€ƒ**: å¯ä½œä¸ºLCELé¡¹ç›®å¼€å‘çš„å‚è€ƒæ¨¡æ¿
3. **åŠŸèƒ½æ‰©å±•**: åŸºäºŽæ­¤æž¶æž„è¿›è¡ŒåŠŸèƒ½æ‰©å±•

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åŽæ›´æ–°**: 2024å¹´  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
